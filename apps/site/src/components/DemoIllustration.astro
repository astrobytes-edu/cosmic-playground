---
/**
 * Per-demo SVG scene illustration for cards.
 * Each demo gets a unique mini-scene using celestial palette tokens.
 * viewBox is 200x140, aspect ratio ~1.43:1.
 */
interface Props {
  slug: string;
  class?: string;
}

const { slug, class: className } = Astro.props;
---

<svg
  class:list={["demo-illus", className]}
  viewBox="0 0 200 140"
  aria-hidden="true"
  focusable="false"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <defs>
    {/* Shared gradients and filters */}
    <radialGradient id="sun-glow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="var(--cp-celestial-sun-core)" />
      <stop offset="60%" stop-color="var(--cp-celestial-sun)" />
      <stop offset="100%" stop-color="var(--cp-celestial-sun-corona)" stop-opacity="0" />
    </radialGradient>
    <radialGradient id="earth-glow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="var(--cp-celestial-earth)" />
      <stop offset="100%" stop-color="var(--cp-celestial-earth)" stop-opacity="0" />
    </radialGradient>
    <filter id="soft-glow">
      <feGaussianBlur stdDeviation="2" />
    </filter>
  </defs>

  {/* Background star dots (shared across all illustrations) */}
  <g class="demo-illus__stars" opacity="0.3">
    <circle cx="15" cy="12" r="0.8" fill="var(--cp-celestial-star)" />
    <circle cx="45" cy="28" r="0.6" fill="var(--cp-celestial-star)" />
    <circle cx="78" cy="8" r="0.7" fill="var(--cp-celestial-star)" />
    <circle cx="120" cy="22" r="0.5" fill="var(--cp-celestial-star)" />
    <circle cx="155" cy="15" r="0.8" fill="var(--cp-celestial-star)" />
    <circle cx="185" cy="35" r="0.6" fill="var(--cp-celestial-star)" />
    <circle cx="30" cy="125" r="0.5" fill="var(--cp-celestial-star)" />
    <circle cx="170" cy="118" r="0.7" fill="var(--cp-celestial-star)" />
  </g>

  {/* Per-demo scene — switch on slug */}

  {slug === "moon-phases" && (
    <g>
      {/* Earth-glow reflection */}
      <circle cx="100" cy="70" r="32" fill="url(#earth-glow)" opacity="0.08" filter="url(#soft-glow)" />
      {/* Moon disk — dark side */}
      <circle cx="100" cy="70" r="28" fill="var(--cp-celestial-moon-dark)" />
      {/* Moon disk — lit crescent */}
      <path d="M100 42 A28 28 0 0 1 100 98 A16 28 0 0 0 100 42" fill="var(--cp-celestial-moon)" />
      {/* Subtle earthshine on dark side */}
      <circle cx="92" cy="70" r="26" fill="var(--cp-celestial-earth)" opacity="0.04" />
    </g>
  )}

  {slug === "keplers-laws" && (
    <g>
      {/* Sun at focus */}
      <circle cx="70" cy="70" r="12" fill="url(#sun-glow)" />
      <circle cx="70" cy="70" r="6" fill="var(--cp-celestial-sun)" />
      {/* Elliptical orbit */}
      <ellipse cx="100" cy="70" rx="65" ry="45" stroke="var(--cp-celestial-orbit)" stroke-width="0.8" opacity="0.4" />
      {/* Swept area wedge */}
      <path d="M70 70 L155 45 A65 45 0 0 1 160 65 Z" fill="var(--cp-accent)" opacity="0.15" />
      {/* Planet */}
      <circle cx="155" cy="45" r="5" fill="var(--cp-celestial-earth)" />
      <circle cx="155" cy="45" r="8" fill="var(--cp-celestial-earth)" opacity="0.15" filter="url(#soft-glow)" />
    </g>
  )}

  {slug === "angular-size" && (
    <g>
      {/* Eye/observer point */}
      <circle cx="30" cy="70" r="3" fill="var(--cp-celestial-moon)" />
      {/* Near object (large) */}
      <circle cx="90" cy="55" r="14" fill="var(--cp-celestial-earth)" opacity="0.6" />
      {/* Far object (small) */}
      <circle cx="160" cy="85" r="7" fill="var(--cp-celestial-mars)" opacity="0.5" />
      {/* Sightlines */}
      <line x1="33" y1="68" x2="160" y2="78" stroke="var(--cp-celestial-orbit)" stroke-width="0.6" stroke-dasharray="4 3" opacity="0.5" />
      <line x1="33" y1="72" x2="160" y2="92" stroke="var(--cp-celestial-orbit)" stroke-width="0.6" stroke-dasharray="4 3" opacity="0.5" />
      {/* Angle arc */}
      <path d="M45 66 A15 15 0 0 1 45 74" stroke="var(--cp-accent)" stroke-width="1" fill="none" />
    </g>
  )}

  {slug === "parallax-distance" && (
    <g>
      {/* Nearby star */}
      <circle cx="100" cy="50" r="4" fill="var(--cp-celestial-sun)" />
      <circle cx="100" cy="50" r="8" fill="var(--cp-celestial-sun)" opacity="0.15" filter="url(#soft-glow)" />
      {/* Two observation points */}
      <circle cx="60" cy="115" r="3" fill="var(--cp-celestial-earth)" />
      <circle cx="140" cy="115" r="3" fill="var(--cp-celestial-earth)" />
      {/* Baseline */}
      <line x1="60" y1="115" x2="140" y2="115" stroke="var(--cp-accent)" stroke-width="1" />
      {/* Sightlines */}
      <line x1="60" y1="115" x2="100" y2="50" stroke="var(--cp-celestial-orbit)" stroke-width="0.6" stroke-dasharray="3 2" opacity="0.5" />
      <line x1="140" y1="115" x2="100" y2="50" stroke="var(--cp-celestial-orbit)" stroke-width="0.6" stroke-dasharray="3 2" opacity="0.5" />
      {/* Parallax angle arc */}
      <path d="M90 58 A12 12 0 0 1 110 58" stroke="var(--cp-accent)" stroke-width="1" fill="none" />
    </g>
  )}

  {slug === "seasons" && (
    <g>
      {/* Sun (small, off to side) */}
      <circle cx="30" cy="70" r="10" fill="url(#sun-glow)" />
      <circle cx="30" cy="70" r="5" fill="var(--cp-celestial-sun)" />
      {/* Earth */}
      <circle cx="130" cy="70" r="22" fill="var(--cp-celestial-earth)" />
      {/* Day/night terminator */}
      <clipPath id="earth-clip"><circle cx="130" cy="70" r="22" /></clipPath>
      <rect x="130" y="48" width="22" height="44" fill="var(--cp-bg0)" opacity="0.6" clip-path="url(#earth-clip)" />
      {/* Axial tilt line */}
      <line x1="120" y1="45" x2="140" y2="95" stroke="var(--cp-celestial-star)" stroke-width="0.8" stroke-dasharray="2 2" opacity="0.6" />
      {/* Land hints */}
      <circle cx="122" cy="65" r="5" fill="var(--cp-celestial-earth-land, #4a9d4a)" opacity="0.4" clip-path="url(#earth-clip)" />
    </g>
  )}

  {slug === "blackbody-radiation" && (
    <g>
      {/* Planck curve */}
      <defs>
        <linearGradient id="planck-fill" x1="0" y1="0" x2="1" y2="0">
          <stop offset="0%" stop-color="#ff3333" />
          <stop offset="35%" stop-color="#ff8800" />
          <stop offset="55%" stop-color="#ffffff" />
          <stop offset="80%" stop-color="#8888ff" />
          <stop offset="100%" stop-color="#4444cc" />
        </linearGradient>
      </defs>
      {/* Axes */}
      <line x1="30" y1="115" x2="180" y2="115" stroke="var(--cp-muted)" stroke-width="0.6" opacity="0.5" />
      <line x1="30" y1="115" x2="30" y2="25" stroke="var(--cp-muted)" stroke-width="0.6" opacity="0.5" />
      {/* Planck curve silhouette */}
      <path d="M35 115 Q50 112, 60 100 Q75 60, 90 35 Q100 28, 110 35 Q130 55, 150 80 Q165 100, 180 110" stroke="url(#planck-fill)" stroke-width="2" fill="none" />
      {/* Filled area */}
      <path d="M35 115 Q50 112, 60 100 Q75 60, 90 35 Q100 28, 110 35 Q130 55, 150 80 Q165 100, 180 110 L180 115 Z" fill="url(#planck-fill)" opacity="0.08" />
      {/* Peak marker */}
      <circle cx="100" cy="28" r="2" fill="var(--cp-celestial-star)" />
    </g>
  )}

  {slug === "telescope-resolution" && (
    <g>
      {/* Airy disk — concentric rings */}
      <circle cx="100" cy="70" r="40" fill="var(--cp-accent)" opacity="0.03" />
      <circle cx="100" cy="70" r="30" fill="var(--cp-accent)" opacity="0.05" />
      <circle cx="100" cy="70" r="20" fill="var(--cp-accent)" opacity="0.08" />
      <circle cx="100" cy="70" r="12" fill="var(--cp-accent)" opacity="0.15" />
      <circle cx="100" cy="70" r="6" fill="var(--cp-celestial-star)" opacity="0.8" />
      <circle cx="100" cy="70" r="3" fill="var(--cp-celestial-star)" />
      {/* Ring outlines */}
      <circle cx="100" cy="70" r="20" stroke="var(--cp-accent)" stroke-width="0.5" fill="none" opacity="0.3" />
      <circle cx="100" cy="70" r="30" stroke="var(--cp-accent)" stroke-width="0.4" fill="none" opacity="0.2" />
      <circle cx="100" cy="70" r="40" stroke="var(--cp-accent)" stroke-width="0.3" fill="none" opacity="0.15" />
      {/* Aperture hint */}
      <path d="M55 120 L100 100 L145 120" stroke="var(--cp-muted)" stroke-width="0.6" fill="none" opacity="0.3" />
    </g>
  )}

  {slug === "em-spectrum" && (
    <g>
      {/* Spectrum gradient bar */}
      <defs>
        <linearGradient id="spectrum-bar" x1="0" y1="0" x2="1" y2="0">
          <stop offset="0%" stop-color="#cc0000" />
          <stop offset="16%" stop-color="#ff6600" />
          <stop offset="33%" stop-color="#ffff00" />
          <stop offset="50%" stop-color="#00cc00" />
          <stop offset="66%" stop-color="#0066ff" />
          <stop offset="83%" stop-color="#4400cc" />
          <stop offset="100%" stop-color="#6600aa" />
        </linearGradient>
      </defs>
      <rect x="25" y="55" width="150" height="16" rx="3" fill="url(#spectrum-bar)" opacity="0.8" />
      {/* Sine wave above — decreasing wavelength */}
      <path d="M25 40 Q37 28, 50 40 Q63 52, 76 40 Q85 32, 94 40 Q101 46, 108 40 Q113 36, 118 40 Q122 43, 126 40 Q129 38, 132 40 Q135 42, 138 40 Q140 39, 142 40 Q144 41, 146 40 Q148 39.5, 150 40 Q152 40.5, 154 40 Q155 39.5, 157 40 Q158 40.3, 160 40 Q161 39.7, 163 40 Q164 40.2, 166 40 Q167 39.8, 168 40 L175 40" stroke="var(--cp-celestial-star)" stroke-width="1" fill="none" opacity="0.5" />
      {/* Labels */}
      <text x="25" y="90" fill="var(--cp-muted)" font-size="7" font-family="var(--cp-font-sans)">Radio</text>
      <text x="155" y="90" fill="var(--cp-muted)" font-size="7" font-family="var(--cp-font-sans)">Gamma</text>
    </g>
  )}

  {slug === "eclipse-geometry" && (
    <g>
      {/* Sun */}
      <circle cx="30" cy="70" r="18" fill="url(#sun-glow)" />
      <circle cx="30" cy="70" r="10" fill="var(--cp-celestial-sun)" />
      {/* Moon (in front of sun from Earth's perspective) */}
      <circle cx="90" cy="70" r="6" fill="var(--cp-celestial-moon-dark)" />
      <circle cx="90" cy="70" r="6" stroke="var(--cp-celestial-moon)" stroke-width="0.5" fill="none" />
      {/* Earth */}
      <circle cx="160" cy="70" r="10" fill="var(--cp-celestial-earth)" />
      {/* Shadow cone */}
      <path d="M90 64 L160 60 L160 80 L90 76 Z" fill="var(--cp-bg0)" opacity="0.25" />
      {/* Umbra line */}
      <line x1="90" y1="70" x2="160" y2="70" stroke="var(--cp-muted)" stroke-width="0.4" stroke-dasharray="2 2" opacity="0.4" />
    </g>
  )}

  {slug === "retrograde-motion" && (
    <g>
      {/* Inner orbit (Earth) */}
      <circle cx="80" cy="70" r="28" stroke="var(--cp-celestial-orbit)" stroke-width="0.6" fill="none" opacity="0.3" />
      {/* Outer orbit (Mars) */}
      <circle cx="80" cy="70" r="55" stroke="var(--cp-celestial-orbit)" stroke-width="0.6" fill="none" opacity="0.3" />
      {/* Sun */}
      <circle cx="80" cy="70" r="5" fill="var(--cp-celestial-sun)" />
      {/* Earth */}
      <circle cx="108" cy="70" r="3.5" fill="var(--cp-celestial-earth)" />
      {/* Mars */}
      <circle cx="135" cy="55" r="3" fill="var(--cp-celestial-mars)" />
      {/* Retrograde loop on sky */}
      <path d="M150 20 Q158 15, 162 20 Q168 30, 160 32 Q152 34, 155 25 Q158 18, 165 22" stroke="var(--cp-celestial-mars)" stroke-width="1.2" fill="none" opacity="0.6" />
    </g>
  )}

  {slug === "eos-lab" && (
    <g>
      {/* Axes */}
      <line x1="35" y1="115" x2="180" y2="115" stroke="var(--cp-muted)" stroke-width="0.6" opacity="0.5" />
      <line x1="35" y1="115" x2="35" y2="20" stroke="var(--cp-muted)" stroke-width="0.6" opacity="0.5" />
      {/* Regime regions */}
      <rect x="36" y="70" width="50" height="44" fill="var(--cp-accent)" opacity="0.08" rx="2" />
      <rect x="86" y="40" width="50" height="74" fill="var(--cp-celestial-sun)" opacity="0.06" rx="2" />
      <rect x="136" y="21" width="43" height="93" fill="var(--cp-violet)" opacity="0.08" rx="2" />
      {/* Regime labels */}
      <text x="48" y="95" fill="var(--cp-accent)" font-size="6" font-family="var(--cp-font-sans)" opacity="0.7">Ideal</text>
      <text x="96" y="80" fill="var(--cp-celestial-sun)" font-size="6" font-family="var(--cp-font-sans)" opacity="0.7">Degen.</text>
      <text x="143" y="60" fill="var(--cp-violet)" font-size="6" font-family="var(--cp-font-sans)" opacity="0.7">Rad.</text>
      {/* Phase boundary curves */}
      <path d="M36 70 Q60 68, 86 40" stroke="var(--cp-accent)" stroke-width="1" fill="none" opacity="0.4" />
      <path d="M86 40 Q120 30, 136 21" stroke="var(--cp-celestial-sun)" stroke-width="1" fill="none" opacity="0.4" />
    </g>
  )}

  {slug === "conservation-laws" && (
    <g>
      {/* Two colliding bodies */}
      <circle cx="65" cy="70" r="12" fill="var(--cp-celestial-earth)" opacity="0.6" />
      <circle cx="140" cy="70" r="8" fill="var(--cp-celestial-mars)" opacity="0.6" />
      {/* Momentum arrows */}
      <line x1="80" y1="70" x2="105" y2="70" stroke="var(--cp-accent)" stroke-width="1.5" />
      <path d="M102 67 L108 70 L102 73" fill="var(--cp-accent)" />
      <line x1="130" y1="70" x2="115" y2="70" stroke="var(--cp-pink)" stroke-width="1" />
      <path d="M118 67 L112 70 L118 73" fill="var(--cp-pink)" />
      {/* Energy bar below */}
      <rect x="50" y="100" width="100" height="6" rx="3" fill="var(--cp-muted)" opacity="0.15" />
      <rect x="50" y="100" width="60" height="6" rx="3" fill="var(--cp-accent)" opacity="0.3" />
      <rect x="110" y="100" width="40" height="6" rx="3" fill="var(--cp-pink)" opacity="0.25" />
    </g>
  )}

  {slug === "binary-orbits" && (
    <g>
      {/* Center of mass */}
      <circle cx="100" cy="70" r="1.5" fill="var(--cp-muted)" opacity="0.5" />
      <circle cx="100" cy="70" r="3" stroke="var(--cp-muted)" stroke-width="0.5" fill="none" stroke-dasharray="2 1" opacity="0.4" />
      {/* Star A orbit */}
      <ellipse cx="100" cy="70" rx="35" ry="22" stroke="var(--cp-celestial-orbit)" stroke-width="0.6" fill="none" opacity="0.3" />
      {/* Star B orbit */}
      <ellipse cx="100" cy="70" rx="22" ry="14" stroke="var(--cp-celestial-orbit)" stroke-width="0.6" fill="none" opacity="0.3" />
      {/* Star A */}
      <circle cx="135" cy="62" r="6" fill="var(--cp-celestial-sun)" />
      <circle cx="135" cy="62" r="10" fill="var(--cp-celestial-sun)" opacity="0.1" filter="url(#soft-glow)" />
      {/* Star B */}
      <circle cx="78" cy="78" r="4" fill="var(--cp-celestial-mars)" />
      <circle cx="78" cy="78" r="7" fill="var(--cp-celestial-mars)" opacity="0.1" filter="url(#soft-glow)" />
      {/* Trail arcs */}
      <path d="M135 62 A35 22 0 0 1 100 48" stroke="var(--cp-celestial-sun)" stroke-width="1" fill="none" opacity="0.2" />
      <path d="M78 78 A22 14 0 0 1 100 84" stroke="var(--cp-celestial-mars)" stroke-width="0.8" fill="none" opacity="0.2" />
    </g>
  )}

  {slug === "planetary-conjunctions" && (
    <g>
      {/* Sun */}
      <circle cx="70" cy="70" r="8" fill="url(#sun-glow)" />
      <circle cx="70" cy="70" r="4" fill="var(--cp-celestial-sun)" />
      {/* Inner orbit */}
      <circle cx="70" cy="70" r="30" stroke="var(--cp-celestial-orbit)" stroke-width="0.6" fill="none" opacity="0.3" />
      {/* Outer orbit */}
      <circle cx="70" cy="70" r="52" stroke="var(--cp-celestial-orbit)" stroke-width="0.6" fill="none" opacity="0.3" />
      {/* Inner planet (at conjunction) */}
      <circle cx="100" cy="70" r="3.5" fill="var(--cp-celestial-venus)" />
      {/* Outer planet (at conjunction) */}
      <circle cx="122" cy="70" r="4" fill="var(--cp-celestial-mars)" />
      {/* Conjunction alignment line */}
      <line x1="70" y1="70" x2="135" y2="70" stroke="var(--cp-accent)" stroke-width="0.6" stroke-dasharray="3 2" opacity="0.4" />
      {/* Angle marker */}
      <path d="M82 65 A12 12 0 0 1 82 75" stroke="var(--cp-accent)" stroke-width="0.8" fill="none" opacity="0.5" />
    </g>
  )}
</svg>

<style>
  .demo-illus {
    width: 100%;
    height: auto;
    display: block;
  }
</style>
