@import "../../shared/stub-demo.css";

.parallax-demo .cp-panel,
.parallax-demo .cp-tabs-container {
  background: color-mix(in srgb, var(--cp-instr-panel-bg) 92%, transparent);
  border-color: color-mix(in srgb, var(--cp-instr-panel-border) 80%, transparent);
  box-shadow: none;
}

.parallax-demo .cp-panel-body {
  display: grid;
  gap: var(--cp-space-3);
}

.cp-field {
  margin-bottom: 0;
}

.cp-field--compact {
  padding: var(--cp-space-2);
  border: 1px solid color-mix(in srgb, var(--cp-border) 70%, transparent);
  border-radius: var(--cp-r-1);
  background: color-mix(in srgb, var(--cp-bg2) 64%, transparent);
}

.cp-field__value {
  font-family: var(--cp-font-mono);
  font-size: var(--cp-text-sm);
  color: var(--cp-text);
  margin-bottom: var(--cp-space-1);
}

.cp-field__hint {
  margin-top: var(--cp-space-1);
  color: var(--cp-muted);
  font-size: var(--cp-text-sm);
}

.cp-check--inline {
  margin-top: var(--cp-space-2);
}

.distance-input-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--cp-space-2);
  margin-bottom: var(--cp-space-2);
}

.distance-input-cell {
  display: grid;
  gap: var(--cp-space-1);
}

.distance-input-label {
  font-size: var(--cp-text-xs);
  color: var(--cp-muted);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.steps-list {
  margin: var(--cp-space-2) 0 0;
  padding-left: var(--cp-space-5);
  color: var(--cp-text2);
}

.steps-list li + li {
  margin-top: var(--cp-space-1);
}

.stage {
  padding: var(--cp-space-3);
}

.viz-layout {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--cp-space-3);
}

.viz-panel {
  background: var(--cp-instr-panel-bg);
  border: 1px solid var(--cp-instr-panel-border);
  border-radius: var(--cp-r-2);
  padding: var(--cp-space-3);
  display: grid;
  gap: var(--cp-space-2);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.panel-title {
  font-size: var(--cp-text-sm);
  font-weight: var(--cp-font-semibold);
  color: var(--cp-text2);
  letter-spacing: 0.01em;
}

.stage__svg {
  width: 100%;
  height: auto;
  display: block;
  border-radius: var(--cp-r-2);
  border: 1px solid color-mix(in srgb, var(--cp-border) 75%, transparent);
  background:
    radial-gradient(
      circle at 16% 14%,
      color-mix(in srgb, var(--cp-celestial-sun) 24%, transparent),
      transparent 56%
    ),
    radial-gradient(
      circle at 80% 18%,
      color-mix(in srgb, var(--cp-accent-ice) 18%, transparent),
      transparent 60%
    ),
    radial-gradient(circle at 50% 52%, var(--cp-bg1), var(--cp-bg0));
}

.stage__bg {
  fill: transparent;
}

.stage__orbit {
  fill: none;
  stroke: color-mix(in srgb, var(--cp-celestial-orbit) 85%, transparent);
  stroke-width: 2;
  stroke-dasharray: 5 6;
  opacity: 0.86;
}

.stage__sun {
  fill: var(--cp-celestial-sun);
  filter: drop-shadow(var(--cp-glow-sun));
}

.stage__earth {
  fill: var(--cp-celestial-earth);
  stroke: color-mix(in srgb, var(--cp-celestial-earth) 44%, var(--cp-text));
  stroke-width: 1.6;
  filter: drop-shadow(var(--cp-glow-planet));
}

.stage__earth--jan {
  fill: color-mix(in srgb, var(--cp-accent-ice) 76%, var(--cp-celestial-earth));
  stroke: color-mix(in srgb, var(--cp-accent-ice) 46%, var(--cp-text));
}

.stage__earth--jul {
  fill: color-mix(in srgb, var(--cp-accent-rose) 74%, var(--cp-celestial-earth));
  stroke: color-mix(in srgb, var(--cp-accent-rose) 42%, var(--cp-text));
}

.earth-draggable {
  cursor: grab;
}

.earth-draggable:active {
  cursor: grabbing;
}

.earth-draggable:focus-visible {
  outline: none;
}

.earth-draggable:focus-visible #earthEpochA {
  stroke: color-mix(in srgb, var(--cp-accent-ice) 85%, var(--cp-text));
  stroke-width: 3;
}

.stage__star {
  fill: var(--cp-celestial-star);
  filter: drop-shadow(var(--cp-glow-star));
}

.stage__baseline {
  stroke: color-mix(in srgb, var(--cp-text) 55%, transparent);
  stroke-width: 2.2;
  stroke-linecap: round;
}

.stage__ray {
  stroke-width: 2.2;
  stroke-linecap: round;
}

.stage__ray--jan {
  stroke: color-mix(in srgb, var(--cp-accent-ice) 64%, var(--cp-text));
}

.stage__ray--jul {
  stroke: color-mix(in srgb, var(--cp-accent-rose) 64%, var(--cp-text));
}

.stage__label {
  fill: var(--cp-text);
  font-family: var(--cp-font-sans);
  font-size: 14px;
  font-weight: var(--cp-font-medium);
  text-anchor: middle;
}

.stage__label--sun,
.stage__label--star {
  font-weight: var(--cp-font-semibold);
}

.stage__label--earth,
.stage__label--baseline,
.stage__label--detector-dot {
  fill: var(--cp-text2);
  font-size: 13px;
}

.stage__label--earth-jan,
#detectorEpochALabel {
  fill: color-mix(in srgb, var(--cp-accent-ice) 68%, var(--cp-text));
}

.stage__label--earth-jul,
#detectorEpochBLabel {
  fill: color-mix(in srgb, var(--cp-accent-rose) 68%, var(--cp-text));
}

.stage__note {
  fill: var(--cp-muted);
  font-family: var(--cp-font-sans);
  font-size: 13px;
  text-anchor: middle;
}

.detector__background-stars circle {
  fill: color-mix(in srgb, var(--cp-celestial-star) 78%, var(--cp-text));
  opacity: 0.9;
}

.detector__axis {
  stroke: color-mix(in srgb, var(--cp-border) 80%, transparent);
  stroke-width: 1.5;
  stroke-dasharray: 4 5;
}

.detector__difference {
  stroke: color-mix(in srgb, var(--cp-accent-amber) 84%, var(--cp-text));
  stroke-width: 2.8;
  stroke-linecap: round;
  opacity: 0.85;
}

.detector__error {
  fill: none;
  stroke-width: 1.5;
}

.detector__error--jan {
  stroke: color-mix(in srgb, var(--cp-accent-ice) 70%, transparent);
}

.detector__error--jul {
  stroke: color-mix(in srgb, var(--cp-accent-rose) 70%, transparent);
}

.detector__scatter circle {
  opacity: 0.78;
}

.detector__scatter--jan circle {
  fill: color-mix(in srgb, var(--cp-accent-ice) 75%, var(--cp-text));
}

.detector__scatter--jul circle {
  fill: color-mix(in srgb, var(--cp-accent-rose) 75%, var(--cp-text));
}

.stage__detector-dot {
  stroke-width: 1.7;
}

.stage__detector-dot--jan {
  fill: color-mix(in srgb, var(--cp-accent-ice) 90%, var(--cp-text));
  stroke: color-mix(in srgb, var(--cp-accent-ice) 42%, var(--cp-text));
}

.stage__detector-dot--jul {
  fill: color-mix(in srgb, var(--cp-accent-rose) 90%, var(--cp-text));
  stroke: color-mix(in srgb, var(--cp-accent-rose) 42%, var(--cp-text));
}

#detectorPanel[data-detector-mode="difference"] .detector__background-stars {
  opacity: 0.3;
}

#detectorPanel[data-detector-mode="difference"] .detector__axis {
  opacity: 0.6;
}

#detectorPanel[data-detector-mode="difference"] .detector__difference {
  opacity: 1;
}

#detectorPanel[data-detector-mode="overlay"] .detector__difference {
  opacity: 0.45;
}

#detectorPanel[data-blink="on"] .detector__error,
#detectorPanel[data-blink="on"] .detector__scatter {
  opacity: 0.68;
}

.schematic-note {
  text-align: center;
  color: var(--cp-muted);
  font-size: var(--cp-text-sm);
}

.cp-demo__readouts {
  align-items: stretch;
}

.cp-readout-strip .cp-readout__value {
  font-variant-numeric: tabular-nums;
}

.cp-readout__sub {
  margin-top: var(--cp-space-1);
  color: var(--cp-muted);
  font-size: var(--cp-text-sm);
  font-variant-numeric: tabular-nums;
}

.cp-demo__shelf ul {
  margin: 0;
  padding-left: var(--cp-space-5);
  color: var(--cp-text2);
}

.cp-demo__shelf li + li {
  margin-top: var(--cp-space-2);
}

.cp-demo__sidebar {
  animation: cp-slide-up var(--cp-duration-enter) var(--cp-ease-out) both;
}

.cp-demo__stage {
  min-height: clamp(380px, 62svh, 760px);
  animation: cp-fade-in var(--cp-duration-enter) var(--cp-ease-out) both;
  animation-delay: calc(var(--cp-stagger) * 1);
}

.cp-demo__readouts {
  animation: cp-slide-up var(--cp-duration-enter) var(--cp-ease-out) both;
  animation-delay: calc(var(--cp-stagger) * 2);
}

.cp-demo__shelf {
  animation: cp-slide-up var(--cp-duration-enter) var(--cp-ease-out) both;
  animation-delay: calc(var(--cp-stagger) * 3);
}

@media (max-width: 1080px) {
  .viz-layout {
    grid-template-columns: 1fr;
  }

  .stage__label {
    font-size: 12px;
  }

  .stage__note {
    font-size: 12px;
  }
}

@media (max-width: 720px) {
  .distance-input-grid {
    grid-template-columns: 1fr;
  }

  .cp-readout-strip {
    gap: var(--cp-space-2) var(--cp-space-3);
  }

  .cp-readout-strip .cp-readout {
    min-width: min(190px, 100%);
  }

  #detectorModeLabel,
  #detectorSeparationLabel {
    display: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  .cp-demo__sidebar,
  .cp-demo__stage,
  .cp-demo__readouts,
  .cp-demo__shelf {
    animation: none;
  }

  .cp-button,
  .cp-readout,
  .cp-chip {
    transition: none;
  }
}
